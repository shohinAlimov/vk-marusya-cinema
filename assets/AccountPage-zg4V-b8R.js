import{r as v,b as j,j as a,g as f}from"./vendor-dGG96ymH.js";import{u as N,c as b,d as C,L as d,e as w,f as k,S as y,b as L}from"./index-DjneE7V-.js";import{F as h}from"./FilmCard-BOKcYCYd.js";import"./react-DJG_os-6.js";const F="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.5%203C19.5376%203%2022%205.5%2022%209C22%2016%2014.5%2020%2012%2021.5C9.5%2020%202%2016%202%209C2%205.5%204.5%203%207.5%203C9.35997%203%2011%204%2012%205C13%204%2014.64%203%2016.5%203ZM12.9339%2018.6038C13.8155%2018.0485%2014.61%2017.4955%2015.3549%2016.9029C18.3337%2014.533%2020%2011.9435%2020%209C20%206.64076%2018.463%205%2016.5%205C15.4241%205%2014.2593%205.56911%2013.4142%206.41421L12%207.82843L10.5858%206.41421C9.74068%205.56911%208.5759%205%207.5%205C5.55906%205%204%206.6565%204%209C4%2011.9435%205.66627%2014.533%208.64514%2016.9029C9.39%2017.4955%2010.1845%2018.0485%2011.0661%2018.6038C11.3646%2018.7919%2011.6611%2018.9729%2012%2019.1752C12.3389%2018.9729%2012.6354%2018.7919%2012.9339%2018.6038Z'%20fill='white'/%3e%3c/svg%3e",E=()=>{const{user:s,logout:u,isLoading:g}=N(),{favorites:c,isLoading:_,toggleFavorite:p}=b(),[t,i]=v.useState("favorites"),n=j(),o=C("(max-width: 767px)");if(g)return a.jsx(d,{});if(!s)return a.jsx(f,{to:"/",replace:!0});const m=async()=>{try{await u()}catch(e){console.error("Logout failed:",e)}},l=e=>{n(`/movie/${e}`)},r=async e=>{try{await p(e)}catch(x){console.error("Error removing from favorites:",x)}};return a.jsxs("div",{className:"account-page",children:[a.jsx("div",{className:"container",children:a.jsxs("div",{className:"account-page__content",children:[a.jsx("h1",{className:"account-page__title",children:"Мой аккаунт"}),a.jsxs("div",{className:"account-page__tabs",children:[a.jsxs("button",{className:`account-page__tab-btn ${t==="favorites"?"account-page__tab-btn--active":""}`,onClick:()=>i("favorites"),children:[a.jsx(F,{className:"account-page__favorite-icon",width:24,height:24,"aria-hidden":!0}),o?a.jsx("span",{children:"Избранное"}):a.jsx("span",{children:"Избранные фильмы"})]}),a.jsxs("button",{className:`account-page__tab-btn ${t==="settings"?"account-page__tab-btn--active":""}`,onClick:()=>i("settings"),children:[a.jsx(w,{className:"account-page__user-icon",width:24,height:24,"aria-hidden":!0}),o?a.jsx("span",{children:"Настройки"}):a.jsx("span",{children:"Настройка аккаунта"})]})]}),a.jsxs("div",{className:"account-page__tab-content",children:[t==="favorites"&&a.jsx("div",{className:"account-page__favorites",children:_?a.jsx(d,{}):c.length>0?a.jsx("div",{className:"account-page__favorites-grid",children:c.map(e=>a.jsx(h,{movie:e,showRank:!1,showDeleteButton:!0,onDelete:()=>r(e.id),onClick:()=>l(e.id)},e.id))}):a.jsxs("div",{className:"account-page__empty-favorites",children:[a.jsx("p",{className:"account-page__note",children:"У вас пока нет избранных фильмов"}),a.jsx("button",{className:"btn btn--primary ",onClick:()=>n("/"),children:"Найти фильмы"})]})}),t==="settings"&&a.jsxs("div",{className:"account-page__settings",children:[a.jsxs("div",{className:"account-page__info",children:[a.jsxs("div",{className:"account-page__field",children:[a.jsxs("div",{className:"account-page__field-logo",children:[s.name.charAt(0),s.surname.charAt(0)]}),a.jsxs("div",{className:"account-page__field-info",children:[a.jsx("span",{className:"account-page__field-label",children:"Имя Фамилия"}),a.jsxs("span",{className:"account-page__field-value",children:[s.name," ",s.surname]})]})]}),a.jsxs("div",{className:"account-page__field",children:[a.jsx("div",{className:"account-page__field-logo",children:a.jsx(k,{width:24,height:24,"aria-hidden":!0})}),a.jsxs("div",{className:"account-page__field-info",children:[a.jsx("span",{className:"account-page__field-label",children:"Электронная почта"}),a.jsx("span",{className:"account-page__field-value",children:s.email})]})]})]}),a.jsx("div",{className:"account-page__actions",children:a.jsx("button",{className:"btn btn--primary account-page__logout",onClick:m,children:"Выйти из аккаунта"})})]})]})]})}),c.length>0&&a.jsx(y,{autoPlay:!1,children:c.map(e=>a.jsx(L,{className:"top-movies__slide",children:a.jsx(h,{movie:e,showRank:!1,showDeleteButton:!0,onDelete:()=>r(e.id),onClick:()=>l(e.id)})},e.id))})]})};export{E as default};
