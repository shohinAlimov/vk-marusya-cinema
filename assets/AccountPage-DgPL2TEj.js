import{r as n,b as j,j as a,g as f}from"./vendor-dGG96ymH.js";import{u as N,d as b,e as C,L as h,f as w,g as k,S as y,b as L}from"./index-G1tSvkQe.js";import{F as u}from"./FilmCard-BiL5mJ2n.js";import"./react-DJG_os-6.js";const S=s=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},n.createElement("path",{d:"M16.5 3C19.5376 3 22 5.5 22 9C22 16 14.5 20 12 21.5C9.5 20 2 16 2 9C2 5.5 4.5 3 7.5 3C9.35997 3 11 4 12 5C13 4 14.64 3 16.5 3ZM12.9339 18.6038C13.8155 18.0485 14.61 17.4955 15.3549 16.9029C18.3337 14.533 20 11.9435 20 9C20 6.64076 18.463 5 16.5 5C15.4241 5 14.2593 5.56911 13.4142 6.41421L12 7.82843L10.5858 6.41421C9.74068 5.56911 8.5759 5 7.5 5C5.55906 5 4 6.6565 4 9C4 11.9435 5.66627 14.533 8.64514 16.9029C9.39 17.4955 10.1845 18.0485 11.0661 18.6038C11.3646 18.7919 11.6611 18.9729 12 19.1752C12.3389 18.9729 12.6354 18.7919 12.9339 18.6038Z",fill:"white"})),D=()=>{const{user:s,logout:g,isLoading:_}=N(),{favorites:t,isLoading:p,toggleFavorite:m}=b(),[c,i]=n.useState("favorites"),o=j(),l=C("(max-width: 767px)");if(_)return a.jsx(h,{});if(!s)return a.jsx(f,{to:"/",replace:!0});const x=async()=>{try{await g()}catch(e){console.error("Logout failed:",e)}},r=e=>{o(`/movie/${e}`)},d=async e=>{try{await m(e)}catch(v){console.error("Error removing from favorites:",v)}};return a.jsxs("div",{className:"account-page",children:[a.jsx("div",{className:"container",children:a.jsxs("div",{className:"account-page__content",children:[a.jsx("h1",{className:"account-page__title",children:"Мой аккаунт"}),a.jsxs("div",{className:"account-page__tabs",children:[a.jsxs("button",{className:`account-page__tab-btn ${c==="favorites"?"account-page__tab-btn--active":""}`,onClick:()=>i("favorites"),children:[a.jsx(S,{className:"account-page__favorite-icon",width:24,height:24,"aria-hidden":!0}),l?a.jsx("span",{children:"Избранное"}):a.jsx("span",{children:"Избранные фильмы"})]}),a.jsxs("button",{className:`account-page__tab-btn ${c==="settings"?"account-page__tab-btn--active":""}`,onClick:()=>i("settings"),children:[a.jsx(w,{className:"account-page__user-icon",width:24,height:24,"aria-hidden":!0}),l?a.jsx("span",{children:"Настройки"}):a.jsx("span",{children:"Настройка аккаунта"})]})]}),a.jsxs("div",{className:"account-page__tab-content",children:[c==="favorites"&&a.jsx("div",{className:"account-page__favorites",children:p?a.jsx(h,{}):t.length>0?a.jsx("div",{className:"account-page__favorites-grid",children:t.map(e=>a.jsx(u,{movie:e,showRank:!1,showDeleteButton:!0,onDelete:()=>d(e.id),onClick:()=>r(e.id)},e.id))}):a.jsxs("div",{className:"account-page__empty-favorites",children:[a.jsx("p",{className:"account-page__note",children:"У вас пока нет избранных фильмов"}),a.jsx("button",{className:"btn btn--primary ",onClick:()=>o("/"),children:"Найти фильмы"})]})}),c==="settings"&&a.jsxs("div",{className:"account-page__settings",children:[a.jsxs("div",{className:"account-page__info",children:[a.jsxs("div",{className:"account-page__field",children:[a.jsxs("div",{className:"account-page__field-logo",children:[s.name.charAt(0),s.surname.charAt(0)]}),a.jsxs("div",{className:"account-page__field-info",children:[a.jsx("span",{className:"account-page__field-label",children:"Имя Фамилия"}),a.jsxs("span",{className:"account-page__field-value",children:[s.name," ",s.surname]})]})]}),a.jsxs("div",{className:"account-page__field",children:[a.jsx("div",{className:"account-page__field-logo",children:a.jsx(k,{width:24,height:24,"aria-hidden":!0})}),a.jsxs("div",{className:"account-page__field-info",children:[a.jsx("span",{className:"account-page__field-label",children:"Электронная почта"}),a.jsx("span",{className:"account-page__field-value",children:s.email})]})]})]}),a.jsx("div",{className:"account-page__actions",children:a.jsx("button",{className:"btn btn--primary account-page__logout",onClick:x,children:"Выйти из аккаунта"})})]})]})]})}),t.length>0&&a.jsx(y,{autoPlay:!1,children:t.map(e=>a.jsx(L,{className:"top-movies__slide",children:a.jsx(u,{movie:e,showRank:!1,showDeleteButton:!0,onDelete:()=>d(e.id),onClick:()=>r(e.id)})},e.id))})]})};export{D as default};
